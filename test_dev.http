### HTTP test file (https://www.jetbrains.com/help/idea/exploring-http-syntax.html)
#
# NOTE: Usage (for nvim):
# - install luarocks and lua-5.1/lua5.1/compat-lua (via package manager)
# - install rest.nvim plugin 
# - hover cursor on a request you want to run and :Rest run
#

### vars
@authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2N2NhODY5NTk2MmU4NTZmM2EwY2NiMjEiLCJjcmVkZW50aWFscyI6IjY3Y2E4NjU3OWMxOTM3OWJkYzFhMDAwNyIsInZhbml0eSI6eyJiYWRnZXMiOltdfSwiaW5mbyI6eyJuYW1lIjp7ImZpcnN0IjoidzJoZWxsb3dvcmxkMTIzIiwibGFzdCI6IllFUyJ9LCJsaW5rcyI6eyJvdGhlciI6W119LCJ1c2VybmFtZSI6IkB3MmhlbGxvd29ybGQxMjMiLCJiYXRjaGlkIjoiMTIzIiwicHJvZ3JhbSI6IkJTSVQifSwibWV0YSI6eyJjcmVhdGVkX2F0IjoiMjAyNS0wMy0wN1QwNTozOTozMy4yNDBaIiwidXBkYXRlZF9hdCI6IjIwMjUtMDMtMDdUMDU6Mzk6MzMuMjQwWiJ9LCJfX3YiOjAsImlhdCI6MTc0MTUxNTkwMCwiZXhwIjoxNzQxNTE5NTAwfQ.CwMfCapJIrM9eOLUdwti-o3DZ7ZGhEVn8AMIHR310dg
@orgId = 67c981837c12b0d3b83b702d
@baseUrl = http://localhost:3000
// @baseUrl = http://api.zel.kim

### get all post
GET {{baseUrl}}/post/all

### create comment
POST {{baseUrl}}/comment/
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
        "post_id": "67ca96256d1229bbc5009f47",
        "content": "harru warudo"
}
### register
POST {{baseUrl}}/user/register
Content-Type: application/json 

{
    "credentials": {
        "email": "w2helloworld1234@dlsu.edu.ph",
        "password": "12345678@Aa"
    }
}

### setup
POST {{baseUrl}}/user/setup
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "info": {
        "name": {
            "first": "w2helloworld",
            "last": "YES"
        },
        "username": "@w2helloworld",
        "batchid": "123",
        "program": "BSIT"
    }
}

### login
POST {{baseUrl}}/user/login
Content-Type: application/json

{
    "credentials": {
        "email": "w2helloworld@dlsu.edu.ph",
        "password": "NewPassword123!"
    }
}

### get user info of currently authenticated user
GET {{baseUrl}}/user
Authorization: Bearer {{authToken}}

### get user by id
GET {{baseUrl}}/user/67c8478d8e9f541dfe96893e
Authorization: Bearer {{authToken}}

### get user by email
POST {{baseUrl}}/user/get-by-email
Authorization: Bearer {{authToken}}

{
    "email": "w2helloworld@dlsu.edu.ph"
}

### update user profile (minimal changes)
PUT {{baseUrl}}/user
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "info": {
        "bio": "Updated bio text",
        "links": {
            "linkedin": "https://linkedin.com/in/newprofile"
        }
    }
}

### update user profile (many changes)
PUT {{baseUrl}}/user
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "credentials": {
        "email": "w2helloworld@dlsu.edu.ph",
        "password": "NewPassword123!"
    },
    "info": {
        "name": {
            "first": "w2",
            "last": "helloworld"
        },
        "username": "@w2helloworld",
        "batchid": "123",
        "program": "BSIT",
        "bio": "My updated professional bio",
        "links": {
            "linkedin": "https://linkedin.com/in/updated",
            "facebook": "https://facebook.com/updated",
            "instagram": "https://instagram.com/updated",
            "other": ["https://github.com/updated"]
        }
    },
    "vanity": {
        "display_photo": "https://new-photo-url.com/photo.jpg",
        "cover_photo": "https://new-photo-url.com/cover.jpg"
    }
}

### create post
POST {{baseUrl}}/post
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "title": "another normal post test title",
    "content": {
        "text": "NORMAL econtentyes yes content example something"
    },
    "type": "normal",
    "visibility": "public"
}

### create post with hashtags
POST {{baseUrl}}/post
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "title": "POST w2helloworld normal",
    "content": {
        "text": "Testing hastag post 2 #test"
    },
    "type": "normal",
    "visibility": "public"
}

### delete post
DELETE {{baseUrl}}/post/67ca8d9600ad39b18b9a01f9
Authorization: Bearer {{authToken}}

### search hashtags
GET {{baseUrl}}/hashtag/test
Authorization: Bearer {{authToken}}

### get posts by hashtag
GET {{baseUrl}}/post/hashtag/test
Authorization: Bearer {{authToken}}

### fetch all normal posts of user
GET {{baseUrl}}/post/normal
Authorization: Bearer {{authToken}}

### fetch all project posts of user
GET {{baseUrl}}/post/project
Authorization: Bearer {{authToken}}

### fetch all event posts of user
GET {{baseUrl}}/post/event
Authorization: Bearer {{authToken}}

### --- Organization Routes --- ###

### create organization
POST {{baseUrl}}/org
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "info": {
        "name": "Sample Organization",
        "acronym": "SORG",
        "founding": "2024-03-01",
        "bio": "A sample organization for testing",
        "links": {
            "linkedin": "https://linkedin.com/sampleorg",
            "facebook": "https://facebook.com/sampleorg",
            "instagram": "https://instagram.com/sampleorg",
            "other": ["https://other-link.com"]
        }
    },
    "vanity": {
        "display_photo": "https://example.com/display.jpg",
        "cover_photo": "https://example.com/cover.jpg",
        "badges": []
    }
}

### Get Organization by ID
### Usage: http://localhost:3000/org/<org-id>
GET {{baseUrl}}/org/{{orgId}}

### Get Organization by Acronym
### Usage: http://localhost:3000/org/acronym/<org-acronym>
GET {{baseUrl}}/org/acronym/SORG

### Update Organization
### Usage: http://localhost:3000/org/<org-id>
PUT {{baseUrl}}/org/{{orgId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "info": {
        "name": "Updated Organization Name",
        "acronym": "SORG",
        "bio": "Updated organization description",
        "links": {
            "linkedin": "https://linkedin.com/updated",
            "facebook": "https://facebook.com/updated"
        }
    },
    "vanity": {
        "display_photo": "https://example.com/new-display.jpg"
    }
}

### Delete Organization
### Usage: http://localhost:3000/org/<org-id>
DELETE {{baseUrl}}/org/{{orgId}}
Authorization: Bearer {{authToken}}

### Add Member to Organization
### Usage: http://localhost:3000/org/<org-id>/members
# Note: Requires authentication
POST {{baseUrl}}/org/{{orgId}}/members
Authorization: Bearer {{authToken}}

### Add Member to Organization (with optional req.body)
# Note: Requires authentication
POST {{baseUrl}}/org/{{orgId}}/members
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "position": "MEM"
}

### Get Organization Members
### Usage: http://localhost:3000/org/<org-id>/members
GET {{baseUrl}}/org/{{orgId}}/members
Authorization: Bearer {{authToken}}

### --- Search Posts --- ###

### Basic search
GET {{baseUrl}}/post/search?query=test
Authorization: Bearer {{authToken}}

### Default limit (10)
GET {{baseUrl}}/post/search?query=sigma
Authorization: Bearer {{authToken}}

### Custom limit (e.g., 20)
GET {{baseUrl}}/post/search?query=test&limit=20
Authorization: Bearer {{authToken}}

### Search with type filter
GET {{baseUrl}}/post/search?query=test&type=normal
Authorization: Bearer {{authToken}}

### Search with visibility filter
GET {{baseUrl}}/post/search?query=test&visibility=public
Authorization: Bearer {{authToken}}

### Search with 3 filters and default limit (10)
GET {{baseUrl}}/post/search?query=sigma&type=project&visibility=public
Authorization: Bearer {{authToken}}

### With all parameters
GET {{baseUrl}}/post/search?query=test&type=normal&visibility=public&limit=15
Authorization: Bearer {{authToken}}

